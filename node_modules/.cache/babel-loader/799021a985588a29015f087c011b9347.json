{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"success\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Sign In\", -1);\n\nimport router from '../router';\n\nconst axios = require(\"axios\");\n\nconst __default__ = {\n  name: 'SigninView',\n  components: {},\n\n  data() {\n    return {\n      completeSignIn: false,\n      specialities: \"\",\n      universities: \"\"\n    };\n  },\n\n  methods: {\n    SignIn() {\n      //router.push('/test');\n      // router.go();\n      axios.post(this.$store.state.URLAPI + '/createStudent', {\n        \"email\": this.formDataSign.email,\n        \"firstname\": this.formDataSign.firstname,\n        \"lastname\": this.formDataSign.lastname,\n        \"university\": this.formDataSign.university,\n        \"speciality\": this.formDataSign.speciality,\n        \"password\": this.formDataSign.password\n      }).then(() => {\n        this.completeSignIn = true;\n        router.push('/LoginView');\n      });\n    }\n\n  },\n\n  beforeCreate() {\n    axios.get(this.$store.state.URLAPI + '/university').then(response => this.universities = response.data);\n    axios.get(this.$store.state.URLAPI + '/speciality').then(response => this.specialities = response.data);\n  }\n\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props) {\n    const email_exists = async function ({\n      value\n    }) {\n      let rep = [];\n      await axios.get('https://projetwebapi.herokuapp.com/api/studentemail').then(response => {\n        rep = response.data;\n      });\n\n      for (let elt of rep) {\n        if (value == elt.email) {\n          return new Promise(resolve => {\n            setTimeout(() => resolve(value != elt.email), 10);\n          });\n        }\n      }\n\n      return new Promise(resolve => {\n        setTimeout(() => resolve(value != \"\"), 10);\n      });\n    };\n\n    return (_ctx, _cache) => {\n      const _component_FormKit = _resolveComponent(\"FormKit\");\n\n      return _openBlock(), _createElementBlock(\"section\", null, [_ctx.completeSignIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"Submitted successfully!\")) : _createCommentVNode(\"\", true), _createVNode(_component_FormKit, {\n        id: \"formSignIn\",\n        modelValue: _ctx.formDataSign,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.formDataSign = $event),\n        type: \"form\",\n        \"submit-label\": \"SignIn\",\n        onSubmit: _ctx.SignIn\n      }, {\n        default: _withCtx(() => [_hoisted_2, _createVNode(_component_FormKit, {\n          name: \"email\",\n          label: \"Email address\",\n          validation: \"required|email|(500)email_exists\",\n          \"validation-messages\": {\n            email_exists: 'email adresse already used'\n          },\n          \"validation-rules\": {\n            email_exists: email_exists\n          }\n        }, null, 8, [\"validation-rules\"]), _createVNode(_component_FormKit, {\n          type: \"text\",\n          name: \"firstname\",\n          label: \"firstname\",\n          validation: \"required\"\n        }), _createVNode(_component_FormKit, {\n          type: \"text\",\n          name: \"lastname\",\n          label: \"lastname\",\n          validation: \"required\"\n        }), _createVNode(_component_FormKit, {\n          type: \"select\",\n          name: \"university\",\n          label: \"university\",\n          placeholder: \"Select an university\",\n          options: _ctx.universities,\n          validation: \"required\"\n        }, null, 8, [\"options\"]), _createVNode(_component_FormKit, {\n          type: \"select\",\n          name: \"speciality\",\n          label: \"speciality\",\n          placeholder: \"Select an speciality\",\n          options: _ctx.specialities,\n          validation: \"required\"\n        }, null, 8, [\"options\"]), _createVNode(_component_FormKit, {\n          type: \"password\",\n          name: \"password\",\n          label: \"Password\",\n          validation: \"required\",\n          \"validation-visibility\": \"live\"\n        }), _createVNode(_component_FormKit, {\n          type: \"password\",\n          name: \"password_confirm\",\n          label: \"Confirm password\",\n          validation: \"required|confirm\",\n          \"validation-visibility\": \"live\"\n        })]),\n        _: 1\n      }, 8, [\"modelValue\", \"onSubmit\"])]);\n    };\n  }\n\n});","map":{"version":3,"mappings":";;;;;;;;AAyCA,OAAOA,MAAP,MAAoB,WAApB;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,oBAAe;AACbC,MAAI,EAAE,YADO;AAEbC,YAAU,EAAE,EAFC;;AAKbC,MAAI,GAAG;AACL,WAAO;AACHC,oBAAc,EAAC,KADZ;AAEHC,kBAAY,EAAG,EAFZ;AAGHC,kBAAY,EAAG;AAHZ,KAAP;AAKD,GAXY;;AAYbC,SAAO,EAAE;AAEPC,UAAM,GAAG;AACL;AACA;AACAT,WAAK,CAACU,IAAN,CAAW,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,MAAlB,GAAyB,gBAApC,EAAqD;AACnD,iBAAQ,KAAKC,YAAL,CAAkBC,KADyB;AAEnD,qBAAY,KAAKD,YAAL,CAAkBE,SAFqB;AAGnD,oBAAW,KAAKF,YAAL,CAAkBG,QAHsB;AAInD,sBAAa,KAAKH,YAAL,CAAkBI,UAJoB;AAKnD,sBAAa,KAAKJ,YAAL,CAAkBK,UALoB;AAMnD,oBAAW,KAAKL,YAAL,CAAkBM;AANsB,OAArD,EAOGC,IAPH,CAOQ,MAAM;AACZ,aAAKhB,cAAL,GAAqB,IAArB;AACAN,cAAM,CAACuB,IAAP,CAAY,YAAZ;AACD,OAVD;AAWH;;AAhBM,GAZI;;AA+BbC,cAAY,GAAG;AACbvB,SAAK,CAACwB,GAAN,CAAU,KAAKb,MAAL,CAAYC,KAAZ,CAAkBC,MAAlB,GAAyB,aAAnC,EAAkDQ,IAAlD,CAAuDI,QAAQ,IAAI,KAAKlB,YAAL,GAAqBkB,QAAQ,CAACrB,IAAjG;AACAJ,SAAK,CAACwB,GAAN,CAAU,KAAKb,MAAL,CAAYC,KAAZ,CAAkBC,MAAlB,GAAyB,aAAnC,EAAkDQ,IAAlD,CAAuDI,QAAQ,IAAI,KAAKnB,YAAL,GAAqBmB,QAAQ,CAACrB,IAAjG;AACD;;AAlCY,CAAf;;;AAxBA,UAAMsB,YAAY,GAAG,gBAAgB;AAAEC;AAAF,KAAhB,EAA2B;AAC5C,UAAIC,GAAG,GAAG,EAAV;AACA,YAAM5B,KAAK,CAACwB,GAAN,CAAU,qDAAV,EAAiEH,IAAjE,CAAuEI,QAAD,IAAc;AACxFG,WAAG,GAAGH,QAAQ,CAACrB,IAAf;AACD,OAFK,CAAN;;AAGA,WAAK,IAAIyB,GAAT,IAAgBD,GAAhB,EAAqB;AACnB,YAAGD,KAAK,IAAIE,GAAG,CAACd,KAAhB,EAAuB;AACrB,iBAAO,IAAIe,OAAJ,CAAaC,OAAD,IAAa;AAClCC,sBAAU,CAAC,MAAMD,OAAO,CAACJ,KAAK,IAAIE,GAAG,CAACd,KAAd,CAAd,EAAoC,EAApC,CAAV;AACC,WAFQ,CAAP;AAGD;AACF;;AACD,aAAO,IAAIe,OAAJ,CAAaC,OAAD,IAAa;AAC9BC,kBAAU,CAAC,MAAMD,OAAO,CAACJ,KAAK,IAAI,EAAV,CAAd,EAA4B,EAA5B,CAAV;AACD,OAFM,CAAP;AAIH,KAhBD","names":["router","axios","require","name","components","data","completeSignIn","specialities","universities","methods","SignIn","post","$store","state","URLAPI","formDataSign","email","firstname","lastname","university","speciality","password","then","push","beforeCreate","get","response","email_exists","value","rep","elt","Promise","resolve","setTimeout"],"sources":["D:/Achille/3A/Web/FEHeroku/src/views/SigninView.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    \r\n    <div class=\"success\" v-if=\"completeSignIn\">Submitted successfully!</div>\r\n    <FormKit id=\"formSignIn\" v-model=\"formDataSign\" type=\"form\" submit-label=\"SignIn\" @submit=\"SignIn\">\r\n      <h2>Sign In</h2>\r\n      <FormKit name=\"email\" label=\"Email address\" validation=\"required|email|(500)email_exists\" :validation-messages=\"{ email_exists: 'email adresse already used' }\" :validation-rules=\"{ email_exists }\" />\r\n      <FormKit type=\"text\" name=\"firstname\" label=\"firstname\" validation=\"required\" />\r\n      <FormKit type=\"text\" name=\"lastname\" label=\"lastname\" validation=\"required\" />\r\n      <FormKit type=\"select\" name=\"university\" label=\"university\" placeholder=\"Select an university\" :options=\"universities\" validation=\"required\" />\r\n      <FormKit type=\"select\" name=\"speciality\" label=\"speciality\" placeholder=\"Select an speciality\" :options=\"specialities\" validation=\"required\" />\r\n      <FormKit type=\"password\" name=\"password\" label=\"Password\" validation=\"required\" validation-visibility=\"live\" />\r\n      <FormKit type=\"password\" name=\"password_confirm\" label=\"Confirm password\" validation=\"required|confirm\" validation-visibility=\"live\" />\r\n    </FormKit>\r\n        \r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\n\r\nconst email_exists = async function ({ value }) {\r\n    let rep = [];\r\n    await axios.get('https://projetwebapi.herokuapp.com/api/studentemail').then((response) => {\r\n      rep = response.data;\r\n    });\r\n    for (let elt of rep) {\r\n      if(value == elt.email) {\r\n        return new Promise((resolve) => { \r\n      setTimeout(() => resolve(value != elt.email), 10)\r\n      })\r\n      }\r\n    }\r\n    return new Promise((resolve) => { \r\n      setTimeout(() => resolve(value != \"\"),10)\r\n    })\r\n    \r\n}\r\n</script>\r\n\r\n<script>\r\n\r\nimport router  from '../router';\r\nconst axios = require(\"axios\");\r\n\r\nexport default {\r\n  name: 'SigninView',\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n        completeSignIn:false,\r\n        specialities : \"\",\r\n        universities : \"\",\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    SignIn() {\r\n        //router.push('/test');\r\n        // router.go();\r\n        axios.post(this.$store.state.URLAPI+'/createStudent',{\r\n          \"email\":this.formDataSign.email,\r\n          \"firstname\":this.formDataSign.firstname,\r\n          \"lastname\":this.formDataSign.lastname,\r\n          \"university\":this.formDataSign.university,\r\n          \"speciality\":this.formDataSign.speciality,\r\n          \"password\":this.formDataSign.password\r\n        }).then(() => {\r\n          this.completeSignIn =true;\r\n          router.push('/LoginView');\r\n        })\r\n    }\r\n  },\r\n\r\n  beforeCreate() {\r\n    axios.get(this.$store.state.URLAPI+'/university').then(response => this.universities = (response.data));\r\n    axios.get(this.$store.state.URLAPI+'/speciality').then(response => this.specialities = (response.data));\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\nsection {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-flow: column wrap;\r\n  font-family: 'Montserrat';\r\n\r\n}\r\n\r\nsection #formSignIn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: start;\r\n  flex-flow: wrap column;\r\n  width:500px;\r\n  border: solid 1px #dadce0;\r\n  margin: 40px 0px 40px 0px;\r\n}\r\n\r\nsection form h2{\r\n  font-weight: 600;\r\n  color: #000;\r\n  font-size: 2.25rem;\r\n  margin: 40px 0px 40px 0px;\r\n}\r\n\r\nform>div>div .formkit-label {\r\n  font-family: 'Montserrat';\r\n  font-weight: 600;\r\n  font-size: 22px;\r\n  line-height: 1.2;\r\n  color:black;\r\n}\r\n\r\nsection #formSignIn>div {\r\n  padding:0px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-flow: column wrap;\r\n  height: 120px;\r\n}\r\n\r\n\r\nsection #formSignIn>div:last-child{\r\n  height:100px;\r\n}\r\n\r\nsection #formSignIn>div:last-child div  {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\nsection #formSignIn>div:last-child div div {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\nsection #formSignIn>div:last-child div div button {\r\n  width: 180px;\r\n  margin:0px;\r\n  border: solid 1px #1b46c2;\r\n  background-color:#1b46c2;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n}\r\n\r\nsection #formSignIn>div>div{\r\n  width: 460px;\r\n  margin: 0px;\r\n}\r\n\r\nsection #formSignIn>div>div>div{\r\n  \r\n  margin: 0px;\r\n\r\n}\r\n\r\nsection #formSignIn>div>div>div>input{\r\n  width: 100%;\r\n  margin: 0px;\r\n  border:solid 1px #dadce0;\r\n}\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"const axios = require(\"axios\");\n\nimport AvisComponent from '@/components/AvisComponent.vue';\nexport default {\n  name: 'SearchView',\n  components: {\n    AvisComponent\n  },\n\n  data() {\n    return {\n      university: \"\",\n      speciality: \"\",\n      AvisInfo: [],\n      vide: false,\n      urlAvis: 'http://localhost:8081/#/AvisView/',\n      test: '',\n      isTriNote: true\n    };\n  },\n\n  methods: {\n    triNote() {\n      this.AvisInfo.sort(function compare(a, b) {\n        if (a.note_avis > b.note_avis) return -1;\n        if (a.note_avis < b.note_avis) return 1;\n        return 0;\n      });\n      this.isTriNote = true;\n    },\n\n    triDate() {\n      this.AvisInfo.sort(function compare(a, b) {\n        if (a.date_avis > b.date_avis) return -1;\n        if (a.date_avis < b.date_avis) return 1;\n        return 0;\n      });\n      this.isTriNote = false;\n    }\n\n  },\n\n  beforeCreate() {\n    axios.get(this.$store.state.URLAPI + '/avis/' + this.$store.state.SPECIALITY_SEARCH + '/' + this.$store.state.UNIVERSITY_SEARCH).then(response => {\n      this.AvisInfo = response.data;\n\n      if (response.data[0] === undefined) {\n        this.vide = true;\n      }\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAmBA,MAAMA,KAAI,GAAIC,OAAO,CAAC,OAAD,CAArB;;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AAEA,eAAe;AACXC,MAAI,EAAE,YADK;AAEXC,YAAU,EAAE;AACVF;AADU,GAFD;;AAKbG,MAAI,GAAG;AACL,WAAO;AACHC,gBAAU,EAAC,EADR;AAEHC,gBAAU,EAAC,EAFR;AAGHC,cAAQ,EAAC,EAHN;AAIHC,UAAI,EAAC,KAJF;AAKHC,aAAO,EAAC,mCALL;AAMHC,UAAI,EAAC,EANF;AAOHC,eAAS,EAAC;AAPP,KAAP;AASD,GAfY;;AAgBbC,SAAO,EAAE;AACPC,WAAO,GAAG;AACR,WAAKN,QAAL,CAAcO,IAAd,CAAmB,SAASC,OAAT,CAAiBC,CAAjB,EAAoBC,CAApB,EAAuB;AAC1C,YAAID,CAAC,CAACE,SAAF,GAAcD,CAAC,CAACC,SAApB,EACE,OAAO,CAAC,CAAR;AACF,YAAIF,CAAC,CAACE,SAAF,GAAcD,CAAC,CAACC,SAApB,EACE,OAAO,CAAP;AACF,eAAO,CAAP;AACC,OAND;AAOA,WAAKP,SAAL,GAAiB,IAAjB;AACD,KAVM;;AAWPQ,WAAO,GAAG;AACR,WAAKZ,QAAL,CAAcO,IAAd,CAAmB,SAASC,OAAT,CAAiBC,CAAjB,EAAoBC,CAApB,EAAuB;AAC1C,YAAID,CAAC,CAACI,SAAF,GAAcH,CAAC,CAACG,SAApB,EACE,OAAO,CAAC,CAAR;AACF,YAAIJ,CAAC,CAACI,SAAF,GAAcH,CAAC,CAACG,SAApB,EACE,OAAO,CAAP;AACF,eAAO,CAAP;AACC,OAND;AAOA,WAAKT,SAAL,GAAiB,KAAjB;AACF;;AApBO,GAhBI;;AAsCbU,cAAY,GAAG;AACbtB,SAAK,CAACuB,GAAN,CAAU,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,MAAlB,GAAyB,QAAzB,GAAkC,KAAKF,MAAL,CAAYC,KAAZ,CAAkBE,iBAApD,GAAsE,GAAtE,GAA0E,KAAKH,MAAL,CAAYC,KAAZ,CAAkBG,iBAAtG,EAAyHC,IAAzH,CAA+HC,QAAD,IAC5H;AACE,WAAKtB,QAAL,GAAiBsB,QAAQ,CAACzB,IAA1B;;AACA,UAAGyB,QAAQ,CAACzB,IAAT,CAAc,CAAd,MAAqB0B,SAAxB,EAAmC;AACjC,aAAKtB,IAAL,GAAY,IAAZ;AACF;AAEH,KAPD;AAQD;;AA/CY,CAAf","names":["axios","require","AvisComponent","name","components","data","university","speciality","AvisInfo","vide","urlAvis","test","isTriNote","methods","triNote","sort","compare","a","b","note_avis","triDate","date_avis","beforeCreate","get","$store","state","URLAPI","SPECIALITY_SEARCH","UNIVERSITY_SEARCH","then","response","undefined"],"sourceRoot":"","sources":["D:\\Achille\\3A\\Web\\FEHeroku\\src\\views\\SearchView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1 v-if=\"!vide\">Résultats de votre recherche</h1>\r\n    <h1 v-if=\"vide\" >Aucun Avis trouvé !</h1>\r\n    <p v-if=\"vide\" >Modifier les paramètres de votre recherche afin de trouver des avis</p>\r\n    <div v-if=\"!vide\" id=\"triSearch\">\r\n      <div>Trier Par</div><button @click=\"triNote\" v-bind:class=\"{ active:isTriNote }\">Note</button><button  @click=\"triDate\" v-bind:class=\"{ active: !isTriNote }\" >Date</button>\r\n    </div>\r\n    <section v-bind:class=\"{ sectionEmpty:vide }\">\r\n      <div v-if=\"!vide\">\r\n        <h2 >Avis correspondant aux critères</h2>\r\n      </div>\r\n      <AvisComponent v-for=\"avis in AvisInfo\" :note=\"avis.note_avis\" :title=\"avis.title_avis\"  :key=\"avis.id_avis\" :company=\"avis.name_company\"  :date=\"avis.date_avis.substring(0,10).replace('-','/').replace('-','/')\" :id=\"avis.id_avis\" :avis=\"avis.text_avis.substring(0,300).concat(' ...')\"   v-bind:href=\"urlAvis+avis.id_avis\"/>\r\n    </section>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst axios = require(\"axios\");\r\nimport AvisComponent from '@/components/AvisComponent.vue'\r\n\r\nexport default {\r\n    name: 'SearchView',\r\n    components: {\r\n      AvisComponent,\r\n    },\r\n  data() {\r\n    return {\r\n        university:\"\",\r\n        speciality:\"\",\r\n        AvisInfo:[],\r\n        vide:false,\r\n        urlAvis:'http://localhost:8081/#/AvisView/',\r\n        test:'',\r\n        isTriNote:true,\r\n    }\r\n  },\r\n  methods: {\r\n    triNote() {\r\n      this.AvisInfo.sort(function compare(a, b) {\r\n      if (a.note_avis > b.note_avis)\r\n        return -1;\r\n      if (a.note_avis < b.note_avis )\r\n        return 1;\r\n      return 0; \r\n      });\r\n      this.isTriNote = true;\r\n    },\r\n    triDate() {\r\n      this.AvisInfo.sort(function compare(a, b) {\r\n      if (a.date_avis > b.date_avis)\r\n        return -1;\r\n      if (a.date_avis < b.date_avis )\r\n        return 1;\r\n      return 0; \r\n      });\r\n      this.isTriNote = false;\r\n    }\r\n  },\r\n  beforeCreate() {\r\n    axios.get(this.$store.state.URLAPI+'/avis/'+this.$store.state.SPECIALITY_SEARCH+'/'+this.$store.state.UNIVERSITY_SEARCH).then((response) => \r\n      {\r\n        this.AvisInfo = (response.data);\r\n        if(response.data[0] === undefined) {\r\n          this.vide = true;\r\n        }\r\n        \r\n    })\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\nh1 {\r\n  height: 200px;\r\n}\r\n\r\nsection {\r\n  display: flex;\r\n  flex-flow: row wrap;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n  background-color: #f6f8fe;\r\n  padding:0px 40px 40px 40px;\r\n  min-height: 400px;\r\n}\r\n\r\n.sectionEmpty {\r\n  background-color: white;\r\n}\r\n\r\nsection div {\r\n  width: 100%;\r\n  font-family: 'Montserrat';\r\n  font-weight: 600;\r\n  font-size: 28px;\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\nsection div h2 {\r\n  width: 80%;\r\n  margin-left: 6%;\r\n}\r\n\r\n#triSearch{\r\n  background-color: white;\r\n  width: 240px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  flex-flow: row nowrap;\r\n  font-family: 'Montserrat';\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  border-radius: 4px;\r\n  border:solid 1px  #dadce0;\r\n  height: 40px;\r\n  margin: 20px;\r\n\r\n}\r\n\r\n#triSearch .active {\r\n  background-color:  #dadce0;\r\n}\r\n\r\n#triSearch button {\r\n  border:none;\r\n  font-family: 'Montserrat';\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  background-color: white;\r\n  height: 100%;\r\n  padding: 0px 10px 0px 10px;\r\n}\r\n\r\n#triSearch button:hover {\r\n  cursor: pointer;\r\n}\r\n\r\n#triSearch button:nth-child(2) {\r\n  margin-left: 14px;\r\n  border-left: 1px solid #dadce0;\r\n}\r\n\r\np {\r\n  font-family: 'Montserrat';\r\n  font-weight: 400;\r\n  font-size: 22px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}
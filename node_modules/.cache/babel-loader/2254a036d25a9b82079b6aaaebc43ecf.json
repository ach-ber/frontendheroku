{"ast":null,"code":"const axios = require(\"axios\");\n\nconst __default__ = {\n  name: 'PublishView',\n  components: {},\n\n  data() {\n    return {\n      publishside: true,\n      completePublish: false,\n      completeCompany: false,\n      companies: [],\n      company: [],\n      formDataAvis: \"test\"\n    };\n  },\n\n  methods: {\n    publishfunc() {\n      this.publishside = true;\n      this.completeCompany = false;\n    },\n\n    Publish() {\n      axios.post(this.$store.state.URLAPI + '/createavis', {\n        \"avis\": this.formDataAvis.avis.toString(),\n        \"date\": this.formDataAvis.date.toString(),\n        \"ids\": this.$store.state.ID,\n        \"idc\": this.formDataAvis.company.toString(),\n        \"note\": this.formDataAvis.note,\n        \"title\": this.formDataAvis.title.toString()\n      }, {\n        headers: {\n          'Authorization': `Basic ${sessionStorage.getItem('token')}`\n        }\n      });\n      this.completePublish = true;\n      this.$formkit.reset('formPublish'); //router.push('/test');\n    },\n\n    Add() {\n      axios.post(this.$store.state.URLAPI + '/createcompany', this.formDataCompany, {\n        headers: {\n          'Authorization': `Basic ${sessionStorage.getItem('token')}`\n        }\n      });\n      this.completeCompany = true;\n      this.$formkit.reset('formcompany');\n    }\n\n  },\n\n  updated() {\n    axios.get(this.$store.state.URLAPI + '/company').then(response => this.companies = response.data);\n  }\n\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n\n    const company_exists = async function ({\n      value\n    }) {\n      let rep = [];\n      await axios.get('https://projetwebapi.herokuapp.com/api/company').then(response => {\n        rep = response.data;\n      });\n\n      for (let elt of rep) {\n        if (value == elt.label) {\n          return new Promise(resolve => {\n            setTimeout(() => resolve(value != elt.label), 1);\n          });\n        }\n      }\n\n      return new Promise(resolve => {\n        setTimeout(() => resolve(value != \"\"), 1);\n      });\n    };\n\n    const __returned__ = {\n      axios,\n      company_exists\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n});","map":{"version":3,"mappings":"AAwDA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,oBAAe;AACbC,MAAI,EAAE,aADO;AAEbC,YAAU,EAAE,EAFC;;AAKbC,MAAI,GAAG;AACL,WAAO;AACHC,iBAAW,EAAC,IADT;AAEHC,qBAAe,EAAC,KAFb;AAGHC,qBAAe,EAAC,KAHb;AAIHC,eAAS,EAAC,EAJP;AAKHC,aAAO,EAAE,EALN;AAMHC,kBAAY,EAAC;AANV,KAAP;AAQD,GAdY;;AAebC,SAAO,EAAE;AACPC,eAAW,GAAG;AACV,WAAKP,WAAL,GAAmB,IAAnB;AACA,WAAKE,eAAL,GAAqB,KAArB;AACH,KAJM;;AAMPM,WAAO,GAAG;AAENb,WAAK,CAACc,IAAN,CAAW,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,MAAlB,GAAyB,aAApC,EACA;AACI,gBAAO,KAAKP,YAAL,CAAkBQ,IAAlB,CAAuBC,QAAvB,EADX;AAEI,gBAAO,KAAKT,YAAL,CAAkBU,IAAlB,CAAuBD,QAAvB,EAFX;AAGI,eAAM,KAAKJ,MAAL,CAAYC,KAAZ,CAAkBK,EAH5B;AAII,eAAM,KAAKX,YAAL,CAAkBD,OAAlB,CAA0BU,QAA1B,EAJV;AAKI,gBAAO,KAAKT,YAAL,CAAkBY,IAL7B;AAMI,iBAAQ,KAAKZ,YAAL,CAAkBa,KAAlB,CAAwBJ,QAAxB;AANZ,OADA,EAQE;AACAK,eAAO,EAAE;AACP,2BAAkB,SAAQC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAgC;AADnD;AADT,OARF;AAaA,WAAKpB,eAAL,GAAuB,IAAvB;AACA,WAAKqB,QAAL,CAAcC,KAAd,CAAoB,aAApB,EAhBM,CAiBN;AACH,KAxBM;;AAyBPC,OAAG,GAAG;AACF7B,WAAK,CAACc,IAAN,CAAW,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,MAAlB,GAAyB,gBAApC,EAAqD,KAAKa,eAA1D,EACA;AACEN,eAAO,EAAE;AACP,2BAAkB,SAAQC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAgC;AADnD;AADX,OADA;AAMA,WAAKnB,eAAL,GAAuB,IAAvB;AACA,WAAKoB,QAAL,CAAcC,KAAd,CAAoB,aAApB;AACH;;AAlCM,GAfI;;AAmDbG,SAAO,GAAG;AACR/B,SAAK,CAACgC,GAAN,CAAU,KAAKjB,MAAL,CAAYC,KAAZ,CAAkBC,MAAlB,GAAyB,UAAnC,EAA+CgB,IAA/C,CAAoDC,QAAQ,IAAI,KAAK1B,SAAL,GAAkB0B,QAAQ,CAAC9B,IAA3F;AACD;;AArDY,CAAf;;;;;;;AAxBA,UAAM+B,cAAc,GAAG,gBAAgB;AAAEC;AAAF,KAAhB,EAA2B;AAC9C,UAAIC,GAAG,GAAG,EAAV;AACA,YAAMrC,KAAK,CAACgC,GAAN,CAAU,gDAAV,EAA4DC,IAA5D,CAAkEC,QAAD,IAAc;AACnFG,WAAG,GAAGH,QAAQ,CAAC9B,IAAf;AACD,OAFK,CAAN;;AAGA,WAAK,IAAIkC,GAAT,IAAgBD,GAAhB,EAAqB;AACnB,YAAGD,KAAK,IAAIE,GAAG,CAACC,KAAhB,EAAuB;AACrB,iBAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAClCC,sBAAU,CAAC,MAAMD,OAAO,CAACL,KAAK,IAAIE,GAAG,CAACC,KAAd,CAAd,EAAoC,CAApC,CAAV;AACC,WAFQ,CAAP;AAGD;AACF;;AACD,aAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9BC,kBAAU,CAAC,MAAMD,OAAO,CAACL,KAAK,IAAI,EAAV,CAAd,EAA4B,CAA5B,CAAV;AACD,OAFM,CAAP;AAIH,KAhBD","names":["axios","require","name","components","data","publishside","completePublish","completeCompany","companies","company","formDataAvis","methods","publishfunc","Publish","post","$store","state","URLAPI","avis","toString","date","ID","note","title","headers","sessionStorage","getItem","$formkit","reset","Add","formDataCompany","updated","get","then","response","company_exists","value","rep","elt","label","Promise","resolve","setTimeout"],"sources":["D:/Achille/3A/Web/FEHeroku/src/views/PublishView.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"success\" v-if=\"completePublish\">Submitted successfully!</div>\r\n    <div class=\"success\" v-if=\"completeCompany\">Submitted successfully!</div>\r\n    <FormKit v-model=\"formDataAvis\" type=\"form\" id=\"formPublish\" submit-label=\"Publish\" @submit=\"Publish\" v-if=\"publishside\">\r\n        <h2>Publish</h2>\r\n        <FormKit type=\"text\" name=\"title\" label=\"title\" validation=\"required\" />\r\n        <FormKit type=\"textarea\" name=\"avis\" label=\"DÃ©crivez votre stage !\" validation=\"required\" />\r\n        <FormKit type=\"range\"  name=\"note\" label=\"note\" min=\"0\" max=\"10\" />\r\n        <FormKit type=\"date\"  name=\"date\" label=\"date\" validation=\"required\"/>\r\n        <FormKit type=\"select\" name=\"company\" label=\"Company\" placeholder=\"Select a company\" :options=\"companies\" validation=\"required\" />\r\n        <div>\r\n          <div>\r\n            <label class=\"formkit-label\">Don't find yours ?</label>\r\n            <button class=\"formkit-input\" v-on:click=\"publishside = false, completePublish=false\" v-if=\"publishside\">ADD A COMPANY</button>\r\n          </div>\r\n        </div>\r\n        \r\n    </FormKit>\r\n    <div id=\"formside\" v-if=\"!publishside\">\r\n    <FormKit v-model=\"formDataCompany\" type=\"form\" id=\"formcompany\" submit-label=\"ADD\" @submit=\"Add\" v-if=\"!publishside\" >\r\n        <h2>Add a company</h2>\r\n        <FormKit type=\"text\" name=\"name\" label=\"name\" validation=\"required|(500)company_exists\" :validation-messages=\"{ company_exists: 'company already exists' }\" :validation-rules=\"{ company_exists }\" />\r\n    </FormKit>\r\n    <h2>Back to Publish</h2>\r\n    <button v-on:click=\"publishfunc\" >BACK</button>\r\n    </div>\r\n    \r\n    \r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\n\r\nconst company_exists = async function ({ value }) {\r\n    let rep = [];\r\n    await axios.get('https://projetwebapi.herokuapp.com/api/company').then((response) => {\r\n      rep = response.data;\r\n    });\r\n    for (let elt of rep) {\r\n      if(value == elt.label) {\r\n        return new Promise((resolve) => { \r\n      setTimeout(() => resolve(value != elt.label), 1)\r\n      })\r\n      }\r\n    }\r\n    return new Promise((resolve) => { \r\n      setTimeout(() => resolve(value != \"\"),1)\r\n    })\r\n    \r\n}\r\n</script>\r\n\r\n<script>\r\n\r\n\r\nconst axios = require(\"axios\");\r\n\r\nexport default {\r\n  name: 'PublishView',\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n        publishside:true,\r\n        completePublish:false,\r\n        completeCompany:false,\r\n        companies:[],\r\n        company: [],\r\n        formDataAvis:\"test\",\r\n    }\r\n  },\r\n  methods: {\r\n    publishfunc() {\r\n        this.publishside = true;\r\n        this.completeCompany=false;\r\n    },\r\n\r\n    Publish() {\r\n      \r\n        axios.post(this.$store.state.URLAPI+'/createavis',\r\n        {\r\n            \"avis\":this.formDataAvis.avis.toString(),\r\n            \"date\":this.formDataAvis.date.toString(),\r\n            \"ids\":this.$store.state.ID,\r\n            \"idc\":this.formDataAvis.company.toString(),\r\n            \"note\":this.formDataAvis.note,\r\n            \"title\":this.formDataAvis.title.toString()\r\n        },{\r\n          headers: {\r\n            'Authorization': `Basic ${sessionStorage.getItem('token')}` \r\n          }\r\n        })\r\n        this.completePublish = true;\r\n        this.$formkit.reset('formPublish');\r\n        //router.push('/test');\r\n    },\r\n    Add() {\r\n        axios.post(this.$store.state.URLAPI+'/createcompany',this.formDataCompany,\r\n        {\r\n          headers: {\r\n            'Authorization': `Basic ${sessionStorage.getItem('token')}` \r\n          }\r\n        });\r\n        this.completeCompany = true;\r\n        this.$formkit.reset('formcompany');\r\n    }\r\n  },\r\n  updated() {\r\n    axios.get(this.$store.state.URLAPI+'/company').then(response => this.companies = (response.data))\r\n  },\r\n\r\n\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n\r\nsection #formPublish{\r\n  margin: 20px 0px 40px 0px;\r\n  width: 80%;\r\n  min-width: 800px;\r\n  max-width: 1000px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: start;\r\n  flex-flow: wrap row;\r\n  border: solid 1px #dadce0;\r\n  padding-bottom: 40px;\r\n}\r\n\r\nsection #formPublish{\r\n  justify-content: center;\r\n}\r\n\r\nform>div>div .formkit-label {\r\n  font-family: 'Montserrat';\r\n  font-weight: 600;\r\n  font-size: 22px;\r\n  line-height: 1.2;\r\n  color:black;\r\n}\r\n\r\nsection #formPublish>div {\r\n  padding:0px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-flow: column wrap;\r\n  width: 80%;\r\n  margin:  20px 10% 0px 10%;\r\n  height: 120px;\r\n}\r\n\r\n\r\n\r\nsection #formPublish>div:nth-child(3) {\r\n  height: 200px;\r\n}\r\n\r\nsection #formPublish>div>div {\r\n  width: 100%;\r\n  max-width: 100%;\r\n}\r\n\r\nsection #formPublish>div:nth-child(4), section #formPublish>div:nth-child(5),section #formPublish>div:nth-child(6),section #formPublish>div:nth-child(7)  {\r\n  width: 30%;\r\n}\r\n\r\nsection #formPublish>div:nth-child(4) div div input {\r\n  border:none;\r\n}\r\n\r\nsection #formPublish>div:nth-child(7)>div>button{\r\n border: solid 1px #1b46c2;\r\n color:#1b46c2;\r\n}\r\n\r\nsection #formPublish>div:nth-child(7)>div>button:hover {\r\n  cursor: pointer;\r\n  background-color: #1b46c2;\r\n  color: white;\r\n}\r\n\r\nsection #formPublish>div:nth-child(7) button{\r\n  background-color: white;\r\n \r\n}\r\n\r\nsection #formPublish>div:last-child, section #formside form>div:nth-child(4) {\r\n   height: 60px;\r\n   margin-top: 40px;\r\n}\r\n\r\nsection #formPublish>div:last-child div  {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\nsection #formPublish>div:last-child div div {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\nsection #formPublish>div:last-child div div button,section #formside form>div div div button{\r\n  width: 180px;\r\n  margin:0px;\r\n  border: solid 1px #1b46c2;\r\n  background-color:#1b46c2;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n}\r\n\r\nsection #formPublish>div>div{\r\n  margin: 0px;\r\n}\r\n\r\nsection #formPublish>div>div>div{\r\n  margin: 0px;\r\n\r\n}\r\n\r\nsection #formPublish>div>div>div>input {\r\n  margin: 0px;\r\n  border:solid 1px #dadce0;\r\n}\r\n\r\n/* ------------------------------------------- form company ------------------------------------------- */\r\n\r\nsection #formside {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: start;\r\n  flex-flow: wrap column;\r\n  width:500px;\r\n  border: solid 1px #dadce0;\r\n  margin-top: 20px;\r\n  padding-bottom: 40px;\r\n}\r\n\r\nsection #formside h2{\r\n  font-weight: 600;\r\n  color: #000;\r\n  font-size: 2.25rem;\r\n  margin: 40px 0px 40px 0px;\r\n}\r\n\r\nsection #formside form>div {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-flow: column wrap;\r\n  height: 110px;\r\n}\r\n\r\nsection #formside form>div:last-child {\r\n  height: 60px;\r\n}\r\n\r\nsection #formside form>div:last-child div div {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\nsection #formside>button{\r\n  width: 180px;\r\n  margin:0px;\r\n  border: solid 1px #1b46c2;\r\n  background-color: white;\r\n  font-weight: 600;\r\n  height: 48px;\r\n  font-size: 16px;\r\n  font-family: 'Montserrat';\r\n  color:#1b46c2;\r\n  border-radius:4px;\r\n}\r\n\r\nsection #formside button:hover {\r\n  background-color: #1b46c2;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}